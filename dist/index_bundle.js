!function(e){var t={};function i(s){if(t[s])return t[s].exports;var n=t[s]={i:s,l:!1,exports:{}};return e[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(s,n,function(t){return e[t]}.bind(null,n));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=7)}([function(e){e.exports=JSON.parse('{"rowLen":7350,"endPattern":4,"songData":[{"osc1_oct":7,"osc1_det":0,"osc1_detune":0,"osc1_xenv":0,"osc1_vol":192,"osc1_waveform":2,"osc2_oct":7,"osc2_det":0,"osc2_detune":0,"osc2_xenv":0,"osc2_vol":201,"osc2_waveform":3,"noise_fader":0,"env_attack":100,"env_sustain":150,"env_release":13636,"env_master":92,"fx_filter":2,"fx_freq":4280,"fx_resonance":111,"fx_delay_time":6,"fx_delay_amt":121,"fx_pan_freq":6,"fx_pan_amt":64,"lfo_osc1_freq":0,"lfo_fx_freq":1,"lfo_freq":6,"lfo_amt":75,"lfo_waveform":0,"p":[1,1,3],"c":[{"n":[147,0,0,0,147,0,0,0,149,0,0,0,147,0,0,0,151,0,0,0,154,0,0,0,153,0,0,0,157,0,0,0]},{"n":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{"n":[157,0,0,0,158,0,0,0,156,0,0,0,157,0,0,0,157,0,0,0,160,0,0,0,159,0,0,0,158,0,0,0]}]},{"osc1_oct":7,"osc1_det":0,"osc1_detune":0,"osc1_xenv":1,"osc1_vol":255,"osc1_waveform":0,"osc2_oct":7,"osc2_det":0,"osc2_detune":0,"osc2_xenv":1,"osc2_vol":255,"osc2_waveform":0,"noise_fader":0,"env_attack":50,"env_sustain":150,"env_release":4800,"env_master":200,"fx_filter":2,"fx_freq":600,"fx_resonance":254,"fx_delay_time":0,"fx_delay_amt":0,"fx_pan_freq":0,"fx_pan_amt":0,"lfo_osc1_freq":0,"lfo_fx_freq":0,"lfo_freq":0,"lfo_amt":0,"lfo_waveform":0,"p":[0,2,2],"c":[{"n":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{"n":[152,0,0,0,152,0,0,0,152,0,0,0,154,0,0,0,154,0,0,0,152,0,0,0,152,0,0,0,152,0,0,0]}]},{"osc1_oct":8,"osc1_det":0,"osc1_detune":0,"osc1_xenv":0,"osc1_vol":0,"osc1_waveform":0,"osc2_oct":8,"osc2_det":0,"osc2_detune":0,"osc2_xenv":0,"osc2_vol":0,"osc2_waveform":0,"noise_fader":60,"env_attack":50,"env_sustain":419,"env_release":4607,"env_master":130,"fx_filter":1,"fx_freq":10332,"fx_resonance":120,"fx_delay_time":4,"fx_delay_amt":16,"fx_pan_freq":5,"fx_pan_amt":108,"lfo_osc1_freq":0,"lfo_fx_freq":0,"lfo_freq":5,"lfo_amt":187,"lfo_waveform":0,"p":[0,0,4],"c":[{"n":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{"n":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{"n":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{"n":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,147,147,147,147]}]}],"songLen":23}')},function(e){e.exports=JSON.parse('{"compressionlevel":0,"editorsettings":{"export":{"format":"json","target":"welcome.json"}},"height":12,"infinite":false,"layers":[{"draworder":"topdown","id":2,"name":"Calque d\'Objets 1","objects":[{"height":0,"id":1,"name":"","point":true,"properties":[{"name":"isStart","type":"bool","value":true}],"rotation":0,"type":"","visible":true,"width":0,"x":1.97587,"y":3.05244},{"height":19,"id":2,"name":"","properties":[{"name":"doors","type":"int","value":2}],"rotation":0,"text":{"fontfamily":"MS Shell Dlg 2","pixelsize":3,"text":"Move with ZQSD or WASD","wrap":true},"type":"","visible":true,"width":108,"x":10.8364,"y":5.19954345227475}],"opacity":1,"type":"objectgroup","visible":true,"x":0,"y":0},{"data":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,903,0,0,0,0,0,131,903,0,0,0,0,0,0,0,0,0,0,0,0,0,0,903,0,0,0,0,0,131,903,0,0,0,0,0,0,0,0,0,0,0,0,0,0,903,0,0,0,131,131,131,131,131,131,0,0,0,0,0,0,0,0,0,0,0,0,903,0,0,0,0,0,0,0,0,0,0,0,0,903,0,0,0,0,0,0,0,0,903,0,0,0,0,0,0,0,0,0,0,0,0,903,0,0,0,0,0,0,0,0,903,0,0,0,131,131,131,131,131,131,0,0,0,903,0,0,0,0,0,0,0,0,903,0,0,0,0,0,131,131,0,0,0,0,0,903,0,0,0,0,0,0,0,0,0,0,0,0,0,0,131,131,0,0,0,0,0,903,0,0,0,0,0,0,0,0,0,0,0,0,0,0,131,131,0,0,0,0,0,903,0,0,0,0,0,0,0,0,0,0,0,0,0,0,131,131,0,0,0,0,0,903,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"height":12,"id":1,"name":"Calque de Tuiles 1","opacity":1,"type":"tilelayer","visible":true,"width":22,"x":0,"y":0}],"nextlayerid":3,"nextobjectid":9,"orientation":"orthogonal","properties":[{"name":"bombs","type":"string","value":"1,1,1"},{"name":"canRoll","type":"bool","value":false}],"renderorder":"left-up","tiledversion":"1.4.2","tileheight":1,"tilesets":[{"firstgid":1,"source":"aos.tsx"}],"tilewidth":1,"type":"map","version":1.4,"width":22}')},function(e){e.exports=JSON.parse('{"compressionlevel":-1,"editorsettings":{"export":{"format":"json","target":"level1_bombs.json"}},"height":12,"infinite":false,"layers":[{"draworder":"topdown","id":2,"name":"Calque d\'Objets 1","objects":[{"height":0,"id":1,"name":"","point":true,"properties":[{"name":"isRed","type":"bool","value":true},{"name":"status","type":"int","value":3}],"rotation":0,"type":"","visible":true,"width":0,"x":12.2425459683692,"y":2.54957140264454},{"height":19,"id":2,"name":"","rotation":0,"text":{"fontfamily":"MS Shell Dlg 2","pixelsize":1,"text":"Press [space] to drop a bomb","wrap":true},"type":"","visible":true,"width":108,"x":10.8902280788177,"y":2.30123146486907},{"height":0,"id":4,"name":"","point":true,"properties":[{"name":"isRed","type":"bool","value":true},{"name":"status","type":"int","value":3}],"rotation":0,"type":"","visible":true,"width":0,"x":11.3793103448276,"y":9.98185117967332},{"height":19,"id":5,"name":"","rotation":0,"text":{"fontfamily":"MS Shell Dlg 2","pixelsize":1,"text":"The red ones detect hostiles, yellow have a timer","wrap":true},"type":"","visible":true,"width":108,"x":10.8750810215193,"y":4.10369355009782}],"opacity":1,"type":"objectgroup","visible":true,"x":0,"y":0},{"data":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,649,649,649,649,649,649,649,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,649,649,649,649,649,649,649,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,131,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,131,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,131,0,0,0,0,0,131,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,131,0,0,0,0,0,131,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"height":12,"id":1,"name":"Calque de Tuiles 1","opacity":1,"type":"tilelayer","visible":true,"width":22,"x":0,"y":0}],"nextlayerid":3,"nextobjectid":6,"orientation":"orthogonal","properties":[{"name":"bombs","type":"string","value":"0,2,2"}],"renderorder":"right-down","tiledversion":"1.4.2","tileheight":1,"tilesets":[{"firstgid":1,"source":"aos.tsx"}],"tilewidth":1,"type":"map","version":1.4,"width":22}')},function(e){e.exports=JSON.parse('{"compressionlevel":-1,"editorsettings":{"export":{"format":"json","target":"level2_bombsMoove.json"}},"height":12,"infinite":false,"layers":[{"draworder":"topdown","id":2,"name":"Calque d\'Objets 1","objects":[{"height":19,"id":2,"name":"","rotation":0,"text":{"fontfamily":"MS Shell Dlg 2","pixelsize":1,"text":"Green Bombs can be pushed","wrap":true},"type":"","visible":true,"width":108,"x":11.33153,"y":6.09783},{"height":0,"id":4,"name":"","point":true,"properties":[{"name":"isRed","type":"bool","value":true},{"name":"status","type":"int","value":3}],"rotation":0,"type":"","visible":true,"width":0,"x":19.6522,"y":5.69565},{"height":19,"id":5,"name":"","rotation":0,"text":{"fontfamily":"MS Shell Dlg 2","pixelsize":1,"text":"Stay back, i\'m asleep","wrap":true},"type":"","visible":true,"width":108,"x":16.7834780917812,"y":8.69723878662173}],"opacity":1,"type":"objectgroup","visible":true,"x":0,"y":0},{"data":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,131,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,131,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,131,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,131,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,131,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,131,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,131,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,131,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"height":12,"id":1,"name":"Calque de Tuiles 1","opacity":1,"type":"tilelayer","visible":true,"width":22,"x":0,"y":0}],"nextlayerid":3,"nextobjectid":6,"orientation":"orthogonal","properties":[{"name":"bombs","type":"string","value":"3,3,3"}],"renderorder":"right-down","tiledversion":"1.4.2","tileheight":1,"tilesets":[{"firstgid":1,"source":"aos.tsx"}],"tilewidth":1,"type":"map","version":1.4,"width":22}')},function(e){e.exports=JSON.parse('{"compressionlevel":0,"editorsettings":{"export":{"format":"json","target":"level3_flashice.json"}},"height":12,"infinite":false,"layers":[{"draworder":"topdown","id":2,"name":"Calque d\'Objets 1","objects":[{"height":19,"id":2,"name":"","rotation":0,"text":{"fontfamily":"MS Shell Dlg 2","pixelsize":1,"text":"Kill them all (%remain)","wrap":true},"type":"","visible":true,"width":108,"x":10.33153,"y":3.34783},{"height":0,"id":4,"name":"","point":true,"properties":[{"name":"isSpawn","type":"bool","value":true},{"name":"max","type":"int","value":1},{"name":"total","type":"int","value":5}],"rotation":0,"type":"","visible":true,"width":0,"x":19.6522,"y":5.69565},{"height":0,"id":6,"name":"","point":true,"properties":[{"name":"isPowUp","type":"bool","value":true}],"rotation":0,"type":"","visible":true,"width":0,"x":6.52826,"y":9.62102},{"height":19,"id":7,"name":"","rotation":0,"text":{"fontfamily":"MS Shell Dlg 2","pixelsize":1,"text":"Don\'t forget: Blue bombs freeze hostiles","wrap":true},"type":"","visible":true,"width":108,"x":10.5912302307493,"y":9.48305029815919}],"opacity":1,"type":"objectgroup","visible":true,"x":0,"y":0},{"data":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,903,903,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,903,903,0,0,903,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,903,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,903,903,903,903,903,903,903,903,903,903,0,0,0,0,0,0,0,0,0,0,0,0,903,903,903,903,903,903,903,903,903,903,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,903,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,903,0,0,903,903,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,903,903,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"height":12,"id":1,"name":"Calque de Tuiles 1","opacity":1,"type":"tilelayer","visible":true,"width":22,"x":0,"y":0}],"nextlayerid":3,"nextobjectid":8,"orientation":"orthogonal","properties":[{"name":"bombs","type":"string","value":"1,1,1"}],"renderorder":"right-down","tiledversion":"1.4.2","tileheight":1,"tilesets":[{"firstgid":1,"source":"aos.tsx"}],"tilewidth":1,"type":"map","version":1.4,"width":22}')},function(e){e.exports=JSON.parse('{"compressionlevel":-1,"editorsettings":{"export":{"format":"json","target":"level4_boom.json"}},"height":12,"infinite":false,"layers":[{"draworder":"topdown","id":2,"name":"Calque d\'Objets 1","objects":[{"height":19,"id":2,"name":"","rotation":0,"text":{"fontfamily":"MS Shell Dlg 2","pixelsize":1,"text":"%remain red left","wrap":true},"type":"","visible":true,"width":108,"x":10.9846459683692,"y":9.2883455587244},{"height":0,"id":4,"name":"","point":true,"properties":[{"name":"isSpawn","type":"bool","value":true},{"name":"max","type":"int","value":1},{"name":"total","type":"int","value":4}],"rotation":0,"type":"","visible":true,"width":0,"x":19.6522,"y":5.69565},{"height":17.9732953072336,"id":5,"name":"","rotation":0,"text":{"fontfamily":"MS Shell Dlg 2","pixelsize":1,"text":"Some hostiles fire in line, but keep their distance","wrap":true},"type":"","visible":true,"width":106.916256157635,"x":11.0402638423645,"y":2.9180046927664},{"height":0,"id":6,"name":"","point":true,"properties":[{"name":"isSpawn","type":"bool","value":true},{"name":"max","type":"int","value":1},{"name":"total","type":"int","value":4},{"name":"type","type":"int","value":1}],"rotation":0,"type":"","visible":true,"width":0,"x":19.8696,"y":9.17391}],"opacity":1,"type":"objectgroup","visible":true,"x":0,"y":0},{"data":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,903,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,903,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,903,903,903,903,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,903,903,903,903,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,903,903,903,903,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,903,903,903,903,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,903,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,903,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"height":12,"id":1,"name":"Calque de Tuiles 1","opacity":1,"type":"tilelayer","visible":true,"width":22,"x":0,"y":0}],"nextlayerid":3,"nextobjectid":7,"orientation":"orthogonal","properties":[{"name":"bombs","type":"string","value":"1,2,3"}],"renderorder":"right-down","tiledversion":"1.4.2","tileheight":1,"tilesets":[{"firstgid":1,"source":"aos.tsx"}],"tilewidth":1,"type":"map","version":1.4,"width":22}')},function(e){e.exports=JSON.parse('{"compressionlevel":-1,"editorsettings":{"export":{"format":"json","target":"level5_boss.json"}},"height":12,"infinite":false,"layers":[{"draworder":"topdown","id":2,"name":"Calque d\'Objets 1","objects":[{"height":19,"id":7,"name":"","rotation":0,"text":{"fontfamily":"MS Shell Dlg 2","pixelsize":1,"text":"Drop all the bombs !","wrap":true},"type":"","visible":true,"width":108,"x":10.4348,"y":5.67391},{"height":0,"id":8,"name":"","point":true,"properties":[{"name":"isRed","type":"bool","value":true},{"name":"type","type":"int","value":2}],"rotation":0,"type":"","visible":true,"width":0,"x":11.4348,"y":5.78261},{"height":0,"id":9,"name":"","point":true,"properties":[{"name":"isPowUp","type":"bool","value":true}],"rotation":0,"type":"","visible":true,"width":0,"x":19.9066632097485,"y":8.84106818771066},{"height":0,"id":10,"name":"","point":true,"properties":[{"name":"isPowUp","type":"bool","value":true}],"rotation":0,"type":"","visible":true,"width":0,"x":19.9066632097485,"y":3.0801140782992}],"opacity":1,"type":"objectgroup","visible":true,"x":0,"y":0},{"data":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,903,903,903,903,903,903,0,0,0,0,0,0,0,903,903,903,903,903,903,903,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,903,903,903,903,903,903,903,0,0,0,0,0,0,903,903,903,903,903,903,903,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"height":12,"id":1,"name":"Calque de Tuiles 1","opacity":1,"type":"tilelayer","visible":true,"width":22,"x":0,"y":0}],"nextlayerid":3,"nextobjectid":11,"orientation":"orthogonal","properties":[{"name":"bombs","type":"string","value":"3,3,3"}],"renderorder":"right-down","tiledversion":"1.4.2","tileheight":1,"tilesets":[{"firstgid":1,"source":"aos.tsx"}],"tilewidth":1,"type":"map","version":1.4,"width":22}')},function(e,t,i){"use strict";i.r(t);const n=Math;function o(e){return n.sin(6.283184*e)}var r=[o,function(e){return o(e)<0?-1:1},function(e){return e%1-.5},function(e){var t=e%1*4;return t<2?t-1:3-t}];function l(e){return.00390625*n.pow(1.059463094,e-128)}function a(e){return{left:new Float32Array(e),right:new Float32Array(e)}}function c(e,t,i,s){for(var n=i.fx_delay_time*s>>1,o=i.fx_delay_amt/255,r=0;r<t-n;){var l=r,a=r+n;e.left[a]+=e.right[l]*o,e.right[a]+=e.left[l]*o,r++}}function h(e,t){var i=e.createBuffer(2,t.left.length,44100);return i.getChannelData(0).set(t.left),i.getChannelData(1).set(t.right),i}var f=function(e,t,i){this.ctx=e,this.instr=t,this.rowLen=i||5605,this.osc_lfo=r[t.lfo_waveform],this.osc1=r[t.osc1_waveform],this.osc2=r[t.osc2_waveform],this.attack=t.env_attack,this.sustain=t.env_sustain,this.release=t.env_release,this.panFreq=n.pow(2,t.fx_pan_freq-8)/this.rowLen,this.lfoFreq=n.pow(2,t.lfo_freq-8)/this.rowLen};f.prototype._genSound=function(e,t,i){for(var s=0,r=0,a=l(e+12*(this.instr.osc1_oct-8)+this.instr.osc1_det)*(1+8e-4*this.instr.osc1_detune),c=l(e+12*(this.instr.osc2_oct-8)+this.instr.osc2_det)*(1+8e-4*this.instr.osc2_detune),h=this.instr.fx_resonance/255,f=0,y=0,d=t.left.length,u=this.attack+this.sustain+this.release-1;u>=0;--u){var p=u+i,x=this.osc_lfo(p*this.lfoFreq)*this.instr.lfo_amt/512+.5,g=1;u<this.attack?g=u/this.attack:u>=this.attack+this.sustain&&(g-=(u-this.attack-this.sustain)/this.release);var m=a;this.instr.lfo_osc1_freq&&(m+=x),this.instr.osc1_xenv&&(m*=g*g),s+=m;var S=this.osc1(s)*this.instr.osc1_vol;m=c,this.instr.osc2_xenv&&(m*=g*g),r+=m,S+=this.osc2(r)*this.instr.osc2_vol,this.instr.noise_fader&&(S+=(2*n.random()-1)*this.instr.noise_fader*g),S*=g/255;var w=this.instr.fx_freq;this.instr.lfo_fx_freq&&(w*=x);var b=h*(S-y)-(f+=(w=1.5*n.sin(3.141592*w/44100))*y);switch(y+=w*b,this.instr.fx_filter){case 1:S=b;break;case 2:S=f;break;case 3:S=y;break;case 4:S=f+b}m=o(p*this.panFreq)*this.instr.fx_pan_amt/512+.5,S*=.00476*this.instr.env_master,p<d&&(t.left[p]+=S*(1-m),t.right[p]+=S*m)}},f.prototype._createAudioBuffer=function(e,t){var i=this.attack+this.sustain+this.release-1+32*this.rowLen,s=a(i);this._genSound(e,s,0),c(s,i,this.instr,this.rowLen),t(h(this.ctx,s))};var d=function(e,t){this.ctx=e,this.song=t,this.waveSize=44100*t.songLen};d.prototype._generateTrack=function(e,t,i){var s=a(this.waveSize),n=this.waveSize,o=this.song.rowLen,r=this.song.endPattern,l=new f(this.ctx,e,o),h=0,y=0,d=0,u=function(){for(var t=Date.now();;)if(32!==d){if(y===r-1)return p();var i=e.p[y];if(i){var n=e.c[i-1].n[d];n&&l._genSound(n,s,h)}if(h+=o,d+=1,Date.now()-t>33)return void setTimeout(u,0)}else d=0,y+=1},p=function(){c(s,n,e,o);for(var r=0;r<n;r++)t.left[r]+=s.left[r];for(r=0;r<n;r++)t.right[r]+=s.right[r];i()};u()},d.prototype._createAudioBuffer=function(e){var t=this,i=a(this.waveSize),s=0,n=function(){s<t.song.songData.length?(s+=1,t._generateTrack(t.song.songData[s-1],i,n)):e(h(t.ctx,i))};n()};var u=new(window.webkitAudioContext||window.AudioContext);const p=async e=>new Promise(t=>{!function(e,t,i){new d(e,t)._createAudioBuffer(i)}(u,e,e=>{t(e)})});var g=i(0),m=[],S=[],w={},b="_sign",v="_mask";"undefined"!=typeof Symbol&&(b=Symbol(b),v=Symbol(v));var _=function(e,t){var i=t[e];if(!i)throw new Error("The component is not registered");return i},M=_.bind(null,b),k=_.bind(null,v),A=function(e){e.id&&m.forEach((function(t){return t.match(e)}))},C=1,D={},E=function(e){this.id=e||(C++).toString(36),this.components=Object.assign({},D),this.mask=0};E.prototype.add=function(){for(var e=this,t=[],i=arguments.length;i--;)t[i]=arguments[i];t.forEach((function(t){e.components[M(t.constructor)]=t,e.mask|=k(t.constructor)})),A(this)},E.prototype.remove=function(){for(var e=this,t=[],i=arguments.length;i--;)t[i]=arguments[i];t.forEach((function(t){var i=M(t),s=e.components[i];s&&(s.destructor&&s.destructor(),delete e.components[i],e.mask&=~k(t))})),A(this)},E.prototype.has=function(e){return M(e)in this.components},E.prototype.get=function(e){return this.components[e[b]]},E.prototype.eject=function(){!function(e){var t=e.components;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var s=t[i];s&&s.destructor&&s.destructor()}m.forEach((function(t){return t.remove(e)})),delete w[e.id],e.id=0}(this)};var j=function(e,t){this.entity=e,this.prev=null,this.next=t},R=function(e){if(!e)throw new Error("Empty selector");for(var t in this.mask=e,this.map={},this.list=null,this.length=0,w)Object.prototype.hasOwnProperty.call(w,t)&&this.match(w[t])};R.prototype.iterate=function(e){for(var t=this.list;t;)e(t.entity),t=t.next},R.prototype.match=function(e){(this.mask&e.mask)===this.mask?this.add(e):this.remove(e)},R.prototype.add=function(e){if(!this.map[e.id]){var t=new j(e,this.list);this.list&&(this.list.prev=t),this.list=t,this.map[e.id]=t,this.length++}},R.prototype.remove=function(e){var t=this.map[e.id];t&&(t.prev?t.prev.next=t.next:this.list=t.next,t.next&&(t.next.prev=t.prev),delete this.map[e.id],this.length--)};var T=0,P=performance||Date,q=P.now.bind(P),B={register:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];e.forEach((function(e){if(T>31)throw new Error("Components limit reached");if(!e[b]){var t=T.toString(36);D[t]=null,e[b]=t,e[v]=1<<T,T++}}))},process:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];e.forEach((function(e){return S.push(e)}))},create:function(e){var t=new E(e);if(w[t.id])throw new Error("The ID already exist");return w[t.id]=t,t},get:function(e){return w[e]},select:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var i=0;e.forEach((function(e){i|=k(e)}));for(var s=0;s<m.length;s++)if(m[s].mask===i)return m[s];var n=new R(i);return m.push(n),n},update:function(e){var t={};return S.forEach((function(i){var s=q();i.update(e),t[i.constructor.name]=q()-s})),t}};class O{constructor(e,t,i){this.x=e,this.y=t,this.z=i}setX(e){this.x=e}setY(e){this.y=e}setZ(e){this.z=e}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}dot2D(e){return this.x*e.x+this.y*e.y}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}setScalar(e){return this.x=e,this.y=e,this.z=e,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}clone(){return new O(this.x,this.y,this.z)}distance2D(e){return Math.hypot(this.x-e.x,this.y-e.y)}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}normalise(){return this.divideScalar(this.length())}set(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}toString(){return`${x} ${y} ${z}`}}const F=(e,t,i,s,n,o)=>{t.fillStyle=o,t.fillRect(e.x+90*n+10*(i+1),e.y+10*(s+1),10,10)},L=(e,t,i,s,n,o)=>{switch(s.fillStyle="#000",s.fillRect(e.x+90*i,e.y,100,100),s.fillStyle=t.isAvailable?"#010C14":"#470605",s.fillRect(e.x+90*i+10,e.y+10,80,80),n&&(s.fillStyle="rgba(30, 130, 30, 1)",s.fillRect(e.x+90*i+10,e.y+10,80*o,80)),s.fillStyle="#000",t.type){case 0:F(e,s,1,0,i,"#D98A14"),F(e,s,1,1,i,"#F0740A"),F(e,s,4,1,i,"#D98A14"),F(e,s,5,1,i,"#E64F09"),F(e,s,7,2,i,"#F0AB0A"),F(e,s,3,3,i,"#F0AB0A"),F(e,s,4,3,i,"#F0AB0A"),F(e,s,3,4,i,"#F0AB0A"),F(e,s,4,4,i,"#F0AB0A"),F(e,s,1,4,i,"#D98A14"),F(e,s,2,7,i,"#F0740A"),F(e,s,3,7,i,"#D98A14"),F(e,s,5,6,i,"#F0AB0A"),F(e,s,5,7,i,"#E64F09");break;case 1:F(e,s,2,1,i,"#8CC1E9"),F(e,s,2,3,i,"#8CC1E9"),F(e,s,2,4,i,"#8CC1E9"),F(e,s,2,6,i,"#8CC1E9"),F(e,s,2,7,i,"#8CC1E9"),F(e,s,0,3,i,"#8CC1E9"),F(e,s,0,5,i,"#8CC1E9"),F(e,s,1,5,i,"#8CC1E9"),F(e,s,0,7,i,"#8CC1E9"),F(e,s,3,5,i,"#8CC1E9"),F(e,s,4,5,i,"#8CC1E9"),F(e,s,6,5,i,"#8CC1E9"),F(e,s,5,2,i,"#8CC1E9"),F(e,s,4,3,i,"#8CC1E9"),F(e,s,4,7,i,"#8CC1E9");break;case 2:F(e,s,3,3,i,"#B11913"),F(e,s,3,4,i,"#B11913"),F(e,s,4,3,i,"#B11913"),F(e,s,4,4,i,"#B11913"),F(e,s,2,1,i,"#B11913"),F(e,s,1,2,i,"#B11913"),F(e,s,1,3,i,"#B11913"),F(e,s,1,4,i,"#B11913"),F(e,s,1,5,i,"#B11913"),F(e,s,2,6,i,"#B11913"),F(e,s,5,1,i,"#B11913"),F(e,s,6,2,i,"#B11913"),F(e,s,6,3,i,"#B11913"),F(e,s,6,4,i,"#B11913"),F(e,s,6,5,i,"#B11913"),F(e,s,5,6,i,"#B11913");break;case 3:F(e,s,1,3,i,"#97E614"),F(e,s,1,4,i,"#97E614"),F(e,s,2,3,i,"#97E614"),F(e,s,2,4,i,"#97E614"),F(e,s,4,4,i,"#97E614"),F(e,s,6,4,i,"#97E614")}},N=(e,t,i)=>{t.fillStyle="#fff",t.fillRect(e.x,e.y,1*tileSize,1*tileSize),t.fillStyle="#2e5fee",t.fillRect(e.x+2,e.y+2,1*tileSize-4,1*tileSize-4),X(e,t,1)},U=(e,t,i)=>{3===i.effect&&Y(e,t),t.fillStyle="#fff",t.fillRect(e.x,e.y,1*tileSize,1*tileSize),t.fillStyle="#C73F33",t.fillRect(e.x+2,e.y+2,1*tileSize-4,1*tileSize-4),X(e,t,1===i.type?3:2)},W=(e,t,i)=>{t.fillStyle="#fff",t.fillRect(e.x*tileSize,e.y*tileSize,1*tileSize,1*tileSize),t.fillStyle="#000",t.fillRect(e.x*tileSize+2,e.y*tileSize+2,1*tileSize-4,1*tileSize-4),X(e.clone().multiplyScalar(tileSize),t,0)},H=(e,t,i)=>{t.fillStyle="#fff",t.beginPath(),t.arc(e.x,e.y,.5*tileSize,0,$),t.closePath(),t.fill(),t.fillStyle="#000",t.beginPath(),t.arc(e.x,e.y,.5*tileSize-2,0,$),t.closePath(),t.fill()},I=(e,t)=>{t.fillStyle="#000",t.fillRect(e.x,e.y,tileSize,tileSize),t.beginPath(),t.moveTo(e.x+tileSize/4,e.y+tileSize/4),t.lineTo(e.x+tileSize/2,e.y+tileSize/2),t.lineTo(e.x+tileSize*(3/4),e.y+tileSize/4),t.lineTo(e.x+tileSize*(3/4),e.y+tileSize/2),t.lineTo(e.x+tileSize/2,e.y+tileSize*(3/4)),t.lineTo(e.x+tileSize/4,e.y+tileSize/2),t.fillStyle="green",t.closePath(),t.fill()},X=(e,t,i)=>{0===i?(t.strokeStyle="#FFF",t.moveTo(e.x+.2*tileSize,e.y+.2*tileSize),t.lineTo(e.x+.3*tileSize,e.y+.3*tileSize),t.stroke(),t.moveTo(e.x+.2*tileSize,e.y+.3*tileSize),t.lineTo(e.x+.3*tileSize,e.y+.2*tileSize),t.stroke(),t.moveTo(e.x+.7*tileSize,e.y+.2*tileSize),t.lineTo(e.x+.8*tileSize,e.y+.3*tileSize),t.stroke(),t.moveTo(e.x+.7*tileSize,e.y+.3*tileSize),t.lineTo(e.x+.8*tileSize,e.y+.2*tileSize),t.stroke(),t.closePath()):3===i?(t.fillStyle="red",t.fillRect(e.x,e.y+.2*tileSize,tileSize,tileSize/4),t.fillStyle="#000",t.fillRect(e.x+.1*tileSize,e.y+.2*tileSize,tileSize/5,tileSize/5),t.fillRect(e.x+.7*tileSize,e.y+.2*tileSize,tileSize/5,tileSize/5)):(t.fillStyle="#000",t.fillRect(e.x+.1*tileSize,e.y+.2*tileSize,tileSize/5,tileSize/5),t.fillRect(e.x+.7*tileSize,e.y+.2*tileSize,tileSize/5,tileSize/5))},Y=(e,t)=>{t.fillStyle="#fff",t.fillText("Zzz",e.x-10,e.y-10)},J=(e,t,i)=>Math.max(t,Math.min(i,e)),$=2*Math.PI,G=(e,t,i,s,n)=>{const o=e.create();return o.add(new re(null,n,i,s),new Z(t.x,t.y,t.z),new ne(U),new K(0,0,0),new he(0,0,1,1)),o},V=(e,t,i)=>e.x+1>t.x&&e.x<t.x+i.x&&e.y+1>t.y&&e.y<t.y+i.y;class Z extends O{}class K extends O{}class Q extends O{}class ee{constructor(e,t,i,s){this.type=s,this.cd=1e3,this.maxHostiles=t,this.total=i,this.hostiles=[];for(let t=0;t<this.maxHostiles;t++)this.hostiles.push(G(e,new Z(0,0,0),!1,null,s))}remaining(){let e=0;for(let t=0;t<this.hostiles.length;t++)this.hostiles[t].get(re).isActive&&e++;return this.total+e}hasOne(){for(let e=0;e<this.hostiles.length;e++)if(!1===this.hostiles[e].get(re).isActive)return this.hostiles[e];return!1}active(e){const t=this.hasOne();t&&(t.get(re).isActive=!0,t.get(Z).set(e))}}class te{constructor(){this.isUp=!1,this.isLeft=!1,this.isRight=!1,this.isDown=!1,this.isMain=!1,window.addEventListener("keydown",e=>{90!==e.keyCode&&87!==e.keyCode||(this.isUp=!0),32===e.keyCode&&(this.isMain=!0),81!==e.keyCode&&65!==e.keyCode||(this.isLeft=!0),68===e.keyCode&&(this.isRight=!0),83===e.keyCode&&(this.isDown=!0)}),window.addEventListener("keyup",e=>{90!==e.keyCode&&87!==e.keyCode||(this.isUp=!1),32===e.keyCode&&(this.isMain=!1),81!==e.keyCode&&65!==e.keyCode||(this.isLeft=!1),68===e.keyCode&&(this.isRight=!1),83===e.keyCode&&(this.isDown=!1)})}}class ie{constructor(e){this.sc=e}}class se{constructor(e,t,i){this.triggered=!1,this.armed=!1,this.type=e,this.remaining=t,this.total=t,this.radius=i}}class ne{constructor(e){this.draw=e}}class oe{constructor(e){this.diedAt=e}}class re{constructor(e,t,i,s){this.target=e,this.hp=100,this.isActive=i,this.type=t,this.isAttacking=!1,this.effect=s,this.effectTime=1e4}}class le{constructor(e,t,i){this.hostile=e,this.type=i,this.remaining=t}}class ae{constructor(){this.hp=100}}class ce{constructor(e,t,i,s,n){this.text=e,this.x=t,this.y=i,this.isButton=n,this.isHover=!1,this.add=e=>{e.pageY>i&&e.pageY<i+150&&s()},this.move=e=>{e.pageY>i&&e.pageY<i+150?this.isHover=!0:this.isHover=!1},this.isButton&&(window.addEventListener("mousedown",this.add),window.addEventListener("mousemove",this.move))}destructor(){this.isButton&&window.removeEventListener("mousedown",this.add)}}class he{constructor(e,t,i,s){this.xMin=e,this.yMin=t,this.xMax=i,this.yMax=s}}class fe extends O{}class ye{constructor(e){this.cd=e,this.isAvailable=!0,this.isDisabled=!1,this.roll(),this.bomb=null}use(){return this.bomb=new se(this.type,2===this.type||3===this.type?5e3:2500,3),this.isAvailable=!1,this.bomb}roll(){this.type=Math.floor(4*Math.random()),this.isAvailable=!0}set(e){this.type=e,this.isAvailable=!0}}class de{constructor(e,t){this.maxSize=e,this.disabled=0,this.bombSlots=[],this.isRolling=!1,this.canRoll=!0,this.rollAt=-1;for(let i=0;i<e;i++)this.bombSlots.push(new ye(t))}isAvailable(){for(let e=0;e<this.bombSlots.length;e++)if(this.bombSlots[e].isAvailable&&!this.bombSlots[e].isDisabled)return!0;return!1}isAllExploded(){for(let e=0;e<this.bombSlots.length;e++)if(!this.bombSlots[e].bomb)return!1;for(let e=0;e<this.bombSlots.length;e++)if(this.bombSlots[e].bomb.timer>0)return!1;return!0}useBomb(){for(let e=0;e<this.bombSlots.length;e++)if(this.bombSlots[e].isAvailable&&!this.bombSlots[e].isDisabled)return this.bombSlots[e].use()}initRoll(){this.isRolling=!0,this.rollTime=0}roll(){this.isRolling=!1;for(let e=0;e<this.bombSlots.length;e++)this.bombSlots[e].isDisabled||this.bombSlots[e].roll()}set(e){e.forEach((e,t)=>{this.bombSlots[t].set(e)})}disable(e,t){this.disabled++,this.disabled,this.maxSize;for(let e=0;e<this.bombSlots.length;e++)if(!this.bombSlots[e].isDisabled)return void(this.bombSlots[e].isDisabled=!0)}enable(){this.disabled--;for(let e=0;e<this.bombSlots.length;e++)if(this.bombSlots[e].isDisabled)return void(this.bombSlots[e].isDisabled=!1)}}class ue{constructor(e){this.at=e}}class pe{constructor(e){this.to=e,this.timer=-1}}class xe{constructor(e){this.remaining=300,this.points=[],this.bombType=e;for(let e=0;e<9;e++){const e=Math.random()*$;this.points.push(new O(Math.cos(e),Math.sin(e)))}}}class ge{constructor(){this.blink=0,this.exploded=!1}}class me{}const Se=e=>{[ce,ae,de].forEach(t=>{e.select(t).iterate(e=>{e.eject()})})},we=(e,t)=>({isGame:!1,load:()=>{e.create().add(new ce("Play game !",t.width/2-150,t.height/2,()=>{window.currentScreen.unload(),window.currentScreen=be(e),window.currentScreen.load()},!0))},unload:()=>{e.select(ce).iterate(e=>{e.eject()})}}),be=e=>({isGame:!0,load:()=>{window.mapLoader.next(e)},unload:()=>{Se(e),window.mapLoader.unload(e)}});function ve(e){for(var t=e,i=[];t.parent;)i.unshift(t),t=t.parent;return i}const ze={search:function(e,t,i,s){e.cleanDirty();var n=(s=s||{}).heuristic||ze.heuristics.manhattan,o=s.closest||!1,r=new ke((function(e){return e.f})),l=t;for(t.h=n(t,i),e.markDirty(t),r.push(t);r.size()>0;){var a=r.pop();if(a===i)return ve(a);a.closed=!0;for(var c=e.neighbors(a),h=0,f=c.length;h<f;++h){var y=c[h];if(!y.closed&&!y.isWall()){var d=a.g+y.getCost(a),u=y.visited;(!u||d<y.g)&&(y.visited=!0,y.parent=a,y.h=y.h||n(y,i),y.g=d,y.f=y.g+y.h,e.markDirty(y),o&&(y.h<l.h||y.h===l.h&&y.g<l.g)&&(l=y),u?r.rescoreElement(y):r.push(y))}}}return o?ve(l):[]},heuristics:{manhattan:function(e,t){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)},diagonal:function(e,t){var i=Math.sqrt(2),s=Math.abs(t.x-e.x),n=Math.abs(t.y-e.y);return 1*(s+n)+(i-2)*Math.min(s,n)}},cleanNode:function(e){e.f=0,e.g=0,e.h=0,e.visited=!1,e.closed=!1,e.parent=null}};function _e(e,t){t=t||{},this.nodes=[],this.diagonal=!!t.diagonal,this.grid=[];for(var i=0;i<e.length;i++){this.grid[i]=[];for(var s=0,n=e[i];s<n.length;s++){var o=new Me(i,s,n[s]);this.grid[i][s]=o,this.nodes.push(o)}}this.init()}function Me(e,t,i){this.x=e,this.y=t,this.weight=i}function ke(e){this.content=[],this.scoreFunction=e}_e.prototype.init=function(){this.dirtyNodes=[];for(var e=0;e<this.nodes.length;e++)ze.cleanNode(this.nodes[e])},_e.prototype.cleanDirty=function(){for(var e=0;e<this.dirtyNodes.length;e++)ze.cleanNode(this.dirtyNodes[e]);this.dirtyNodes=[]},_e.prototype.markDirty=function(e){this.dirtyNodes.push(e)},_e.prototype.neighbors=function(e){var t=[],i=e.x,s=e.y,n=this.grid;return n[i-1]&&n[i-1][s]&&t.push(n[i-1][s]),n[i+1]&&n[i+1][s]&&t.push(n[i+1][s]),n[i]&&n[i][s-1]&&t.push(n[i][s-1]),n[i]&&n[i][s+1]&&t.push(n[i][s+1]),this.diagonal&&(n[i-1]&&n[i-1][s-1]&&t.push(n[i-1][s-1]),n[i+1]&&n[i+1][s-1]&&t.push(n[i+1][s-1]),n[i-1]&&n[i-1][s+1]&&t.push(n[i-1][s+1]),n[i+1]&&n[i+1][s+1]&&t.push(n[i+1][s+1])),t},_e.prototype.toString=function(){for(var e=[],t=this.grid,i=0;i<t.length;i++){for(var s=[],n=t[i],o=0;o<n.length;o++)s.push(n[o].weight);e.push(s.join(" "))}return e.join("\n")},Me.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},Me.prototype.getCost=function(e){return e&&e.x!=this.x&&e.y!=this.y?1.41421*this.weight:this.weight},Me.prototype.isWall=function(){return 0===this.weight},ke.prototype={push:function(e){this.content.push(e),this.sinkDown(this.content.length-1)},pop:function(){var e=this.content[0],t=this.content.pop();return this.content.length>0&&(this.content[0]=t,this.bubbleUp(0)),e},remove:function(e){var t=this.content.indexOf(e),i=this.content.pop();t!==this.content.length-1&&(this.content[t]=i,this.scoreFunction(i)<this.scoreFunction(e)?this.sinkDown(t):this.bubbleUp(t))},size:function(){return this.content.length},rescoreElement:function(e){this.sinkDown(this.content.indexOf(e))},sinkDown:function(e){for(var t=this.content[e];e>0;){var i=(e+1>>1)-1,s=this.content[i];if(!(this.scoreFunction(t)<this.scoreFunction(s)))break;this.content[i]=t,this.content[e]=s,e=i}},bubbleUp:function(e){for(var t=this.content.length,i=this.content[e],s=this.scoreFunction(i);;){var n,o=e+1<<1,r=o-1,l=null;if(r<t){var a=this.content[r];(n=this.scoreFunction(a))<s&&(l=r)}if(o<t){var c=this.content[o];this.scoreFunction(c)<(null===l?s:n)&&(l=o)}if(null===l)break;this.content[e]=this.content[l],this.content[l]=i,e=l}}};var Ae=i(1),Ce=i(2),De=i(3),Ee=i(4),je=i(5),Re=i(6);const Te=(e,t,...i)=>t.reduce((t,s)=>{if(!s.properties)return t;return s.properties.find(t=>t.name===e)&&t.push({x:s.x,y:s.y,...s.properties.reduce((e,t)=>(-1!==i.indexOf(t.name)&&(e[t.name]=t.value),e),{})}),t},[]),Pe=(e,t,i)=>{const s=e.layers[0].objects,n=Te("isStart",s);if(n.length>0){const e=new Z(n[0].x,n[0].y);((e,t)=>{e.create().add(new de(3,3e3)),e.create().add(new ne(N),new Z(t.x,t.y,t.z),new K(0,0,0),new Q(0,0,0),new te,new ae,new he(0,0,1,1))})(t,new Z(e.x,e.y,0))}if(t.select(de).iterate(e=>{e.get(de).canRoll=!0}),e.properties){const i=e.properties.find(e=>"bombs"===e.name);if(i){const e=i.value.split(",").map(e=>parseInt(e,10));t.select(de).iterate(t=>{t.get(de).set(e)})}const s=e.properties.find(e=>"canRoll"===e.name);s&&t.select(de).iterate(e=>{e.get(de).canRoll=s.value})}t.create().add(new pe,new Z(1));Te("isPowUp",s).forEach(e=>{t.create().add(new me,new Z(e.x,e.y,0),new ne(I))});Te("isSpawn",s,"max","total","type").forEach(e=>{t.create().add(new ee(t,e.max,e.total,e.type?e.type:0),new Z(e.x,e.y,0))});Te("isRed",s,"status","type").forEach(e=>{G(t,new Z(e.x,e.y,0),!0,parseInt(e.status,10),e.type?e.type:0)});Te("isDestroyable",s).forEach(e=>{t.create().add(new ge,new Z(e.x,e.y,0))});s.filter(e=>e.text&&e.text.text.length>0).forEach(e=>{t.create().add(new ie(e.text.text),new Z(e.x,e.y),new te)});e.layers[1].data.forEach((e,i)=>{0!==e&&t.create().add(new fe(i%22,Math.floor(i/22)))})},qe=e=>{[ge,fe,ee,ie,re,pe,oe,se,le,ue,me].forEach(t=>{e.select(t).iterate(e=>{e.eject()})});e.select(de).iterate(e=>{e.get(de).roll()})};document.body.appendChild(document.createElement("canvas"));const Be=document.querySelector("canvas");Be.width=window.innerWidth,Be.height=window.innerHeight;const Oe=()=>Math.min(window.innerWidth/22,(window.innerHeight-150)/12);window.tileSize=Oe(),window.addEventListener("resize",()=>{Be.width=window.innerWidth,Be.height=window.innerHeight,window.tileSize=Oe()});const Fe=Be.getContext("2d");window.mapLoader=(e=>{const t=[Ae,Ce,De,Ee,je,Re];let i=-1;return{unload:()=>{qe(e)},init:()=>{qe(e),i=0,e.select(ae).iterate(e=>{e.get(ae).hp=100}),Pe(t[i],e)},next:()=>{qe(e),i++,i<t.length&&Pe(t[i],e)}}})(B),B.register(Z,K,Q,te,ie,se,ae,re,ee,ce,fe,he,oe,de,le,ue,pe,xe,ne,ge,me),B.process((e=>{const t=e.select(me),i=e.select(ae);return{update:e=>{t.iterate(e=>{i.iterate(t=>{const i=e.get(Z),s=t.get(Z);V(s,i,new Z(1,1,0))&&(t.get(ae).hp=Math.min(t.get(ae).hp+30,100),e.eject())})})}}})(B),((e,t)=>{const i=e.select(Z,ne),s=e.select(fe);return{update:e=>{(e=>{e.fillStyle="#754E38",e.fillRect(0,0,22*tileSize,12*tileSize)})(t),i.iterate(e=>{const i=e.get(Z),s=e.get(ne),n=e.get(re);s.draw(i.clone().multiplyScalar(tileSize),t,n)}),s.iterate(e=>{const i=e.get(fe);t.fillStyle="#DBD2C1",t.fillRect(i.x*tileSize,i.y*tileSize,tileSize,tileSize)}),s.list&&(t.fillRect(0,0,22*tileSize,tileSize),t.fillRect(0,11*tileSize,22*tileSize,tileSize),t.fillRect(0,0,tileSize,12*tileSize),t.fillRect(21*tileSize,0,tileSize,12*tileSize))}}})(B,Fe),((e,t)=>{const i=e.select(ie,Z),s=e.select(ee);return{update:()=>{let e=0;s.iterate(t=>{e+=t.get(ee).remaining()}),i.iterate(i=>{const s=i.get(ie),n=i.get(Z);t.textAlign="center",t.font=tileSize-10+"px sans-serif";const o=s.sc.replace("%remain",0===e?"clear":e);t.fillStyle="#DBD2C1",t.fillText(o,n.x*tileSize,n.y*tileSize)})}}})(B,Fe),(e=>{const t=e.select(Z,te,Q,K),i=e.select(de);let s=!0;return{update:n=>{t.iterate(t=>{const{isUp:n,isDown:o,isLeft:r,isRight:l,isMain:a}=t.get(te),c=t.get(Z),h=t.get(K),f=t.get(Q);f.setScalar(0),n?f.setY(-.01):h.y<0&&!o&&h.setY(J(.02+h.y,-Number.MAX_VALUE,0)),o?f.setY(.01):h.y>0&&!n&&h.setY(J(-.02+h.y,0,Number.MAX_VALUE)),r?f.setX(-.01):h.x<0&&!l&&h.setX(J(.02+h.x,-Number.MAX_VALUE,0)),l?f.setX(.01):h.x>0&&!r&&h.setX(J(-.02+h.x,0,Number.MAX_VALUE)),h.add(f).clampScalar(-1/8,1/8),a||s||(s=!0),a&&s&&(s=!1,i.iterate(t=>{const i=t.get(de);if(i.isAvailable()){const t=i.useBomb();e.create().add(t,new Z(c.x+.5,c.y+.5,0),new ne(H))}}))})}}})(B),((e,t)=>{const i=e.select(se),s=e.select(re,Z),n=e.select(ae),o=e.select(ge,Z);return{update:r=>{i.iterate(i=>{const l=i.get(se),a=i.get(Z);switch(l.remaining-=r,((e,t,i)=>{switch(i.lineWidth=2,e.type){case 0:i.strokeStyle="#ffbd18";break;case 1:i.strokeStyle="#00f";break;case 2:i.strokeStyle="#f00";break;case 3:i.strokeStyle="#0f0"}const s=e.radius*tileSize+5;i.beginPath(),i.moveTo(t.x+s*Math.cos(0),t.y+s*Math.sin(0));for(let e=1;e<=16;e++)i.lineTo(t.x+s*Math.cos(2*e*Math.PI/16),t.y+s*Math.sin(2*e*Math.PI/16));i.lineWidth=1,i.closePath(),i.stroke(),i.beginPath(),i.arc(t.x,t.y,e.radius*tileSize/2,-Math.PI/2,-Math.PI/2+(e.total-e.remaining)/e.total*$),i.strokeStyle="rgba(255, 255, 255, .3)",i.lineWidth=tileSize/2,i.stroke()})(l,a.clone().multiplyScalar(tileSize),t),l.type){case 0:case 1:case 2:case 3:l.remaining<0?(l.triggered=!1,l.isArmed=!1,i.eject(),o.iterate(e=>{const t=e.get(Z),i=e.get(ge);t.distance2D(a)<l.radius&&(i.exploded=!0)}),s.iterate(t=>{const i=t.get(Z),s=t.get(K),n=t.get(re);i.distance2D(a)<l.radius&&(1===l.type?(n.effect=0,n.freezeTime=1100):2===n.type&&n.hp>0?n.hp-=15:(n.isActive=!1,n.effect=!1,s.setScalar(0),e.create().add(new ne(W),new oe(performance.now()),new Z(i.x,i.y,i.z))))}),e.create().add(new Z(a.x,a.y,a.z),new xe(l.type))):2===l.type&&!1===l.triggered?s.iterate(e=>{const t=e.get(Z);e.get(K),e.get(re);t.distance2D(a)<l.radius&&(l.triggered=!0,l.remaining=200)}):3===l.type&&!1===l.triggered&&n.iterate(e=>{const t=e.get(Z),s=(e.get(K),t.clone().addScalar(.5));if(s.distance2D(a)<.5&&l.isArmed&&!i.get(K)){const e=a.clone().sub(s).normalise().multiplyScalar(.1);i.add(new K(e.x,e.y,e.z),new he(0,0,.4,.4))}s.distance2D(a)>1&&(l.isArmed=!0)})}})}}})(B,Fe),((e,t)=>{const i=e.select(ee);return{update:e=>{i.iterate(i=>{const s=i.get(Z),n=i.get(ee);n.cd-=e,n.cd<=0&&n.total>0&&n.hasOne()?(n.cd=1e3,n.active(s),n.total--):n.cd>0&&n.total>0&&(t.beginPath(),t.closePath(),t.fillStyle="rgba(255, 255, 255, .3)",t.fill()),t.fillStyle="#000",t.fillRect(s.x*tileSize,s.y*tileSize,tileSize,tileSize)})}}})(B,Fe),((e,t)=>{const i=e.select(Z,re),s=e.select(Z,ae),n=e.select(fe);return{update:t=>{const o=[];for(let e=0;e<22;e++){o[e]=[];for(let t=0;t<12;t++)o[e].push(1)}n.iterate(e=>{const t=e.get(fe);o[t.x][t.y]=0,t.x<22&&(o[t.x+1][t.y]=0),t.x>0&&(o[t.x-1][t.y]=0),t.y<12&&(o[t.x][t.y+1]=0),t.y>0&&(o[t.x][t.y-1]=0),o[t.x][t.y]=0});const r=new _e(o);s.iterate(s=>{const n=s.get(Z);i.iterate(i=>{const s=i.get(re);if(s.effect&&(s.effectTime-=t),s.effectTime<0&&s.effect&&(s.effect=!1),3===s.effect){i.get(Z).distance2D(n)<5&&(s.effect=-1,s.effectTime=0)}if(s.isActive&&3!==s.effect){const t=i.get(Z),o=i.get(K);if(s.isAttacking&&2!==s.type||0===s.effect)o.setScalar(0);else if(1===s.effect);else if(0===s.type||2===s.type||1===s.type&&t.distance2D(n)>7){let e,i=[];try{t&&(i=ze.search(r,r.grid[Math.floor(n.x+.5)][Math.floor(n.y+.5)],r.grid[Math.floor(t.x)][Math.floor(t.y)])),e=i.length>1?new Z(i[i.length-2].x+.5,i[i.length-2].y+.5,0):n.clone()}catch(t){e=n.clone()}const s=e.sub(t);o.set(s.normalise().multiplyScalar(.07))}else o.setScalar(0);if(!s.isAttacking&&4!==s.effect)if(n.distance2D(t)<2&&0===s.type&&-1!==s.effect)s.isAttacking=!0,e.create().add(new le(s,500,0),new Z(t.x+.5,t.y+.5,t.z));else if(s.isAttacking||1!==s.type){if(2===s.type){s.isAttacking=!0;for(let t=0;t<4;t++)e.create().add(new le(s,1e3,0),new Z(22*Math.random(),12*Math.random(),0))}}else s.isAttacking=!0,e.create().add(new le(s,500,1),new Z(t.x+.5,t.y+.5,t.z))}})})}}})(B),((e,t)=>{const i=e.select(pe,Z),s=e.select(ae,Z),n=e.select(re),o=e.select(ge);let r,l;return{update:()=>{r=0,n.iterate(e=>{r+=e.get(re).isActive?1:0}),l=0,o.iterate(e=>{l+=e.get(ge).exploded?0:1}),s.iterate(e=>{const s=e.get(Z);i.iterate(e=>{const i=e.get(Z),n=0===r&&0===l;switch(t.fillStyle=n?"#40A86D":"#9e333d",i.x){case 0:t.fillRect(5*tileSize,0*tileSize,4*tileSize,tileSize);break;case 1:if(t.fillRect(21*tileSize,4*tileSize,tileSize,4*tileSize),n&&V(s,new O(21,3),new O(1,4))&&(window.mapLoader.next(),s.x=1),n){const e=new Z(19*tileSize,5*tileSize+tileSize/2);t.beginPath(),t.moveTo(e.x,e.y),t.lineTo(e.x+tileSize,e.y),t.lineTo(e.x+tileSize,e.y-tileSize/2),t.lineTo(e.x+2*tileSize,e.y+tileSize/2),t.lineTo(e.x+tileSize,e.y+tileSize+tileSize/2),t.lineTo(e.x+tileSize,e.y+tileSize),t.lineTo(e.x,e.y+tileSize),t.fill()}break;case 2:t.fillRect(5*tileSize,11*tileSize,4*tileSize,tileSize);break;case 3:t.fillRect(0*tileSize,3*tileSize,tileSize,4*tileSize)}})})}}})(B,Fe),((e,t)=>{const i=e.select(he,K,Z),s=e.select(fe);let n=!1;return{update:()=>{i.iterate(e=>{const t=e.get(Z),i=e.get(K);if(0===i.x&&0===i.y)return;const o=e.get(he);t.x+o.xMin<1&&(t.x=1-o.xMin,i.x=-i.x),t.y+o.yMin<1&&(t.y=1-o.yMin,i.y=-i.y),t.x+o.xMax>21&&(t.x=21-o.xMax,i.x=-i.x),t.y+o.yMax>11&&(t.y=11-o.yMax,i.y=-i.y),n=!1,s.iterate(e=>{const s=e.get(fe),r=t.clone();r.add(i),r.x+o.xMax>s.x&&r.x+o.xMax<s.x+1?r.y+o.yMax>s.y&&r.y+o.yMax<s.y+1?i.angle()<new O(r.x+o.xMax-s.x,r.y+o.yMax-s.y).angle()?(t.x=s.x-o.xMax,t.y+=i.y*((r.x-t.x)/i.x),i.x=-i.x,n=!0):(t.y=s.y-o.yMax,t.x+=i.x*((r.y-t.y)/i.y),i.y=-i.y):r.y+o.yMin>s.y&&r.y+o.yMin<s.y+1&&(i.angle()>new O(r.x+o.xMax-s.x,r.y+o.yMax-(s.y+1)).angle()?(t.y=s.y+o.xMax,t.x+=i.x*((r.y-t.y)/i.y),i.y=-i.y,n=!0):(t.x=s.x-o.xMax,t.y+=i.y*((r.x-t.x)/i.x),i.x=-i.x,n=!0)):r.x+o.xMin>s.x&&r.x+o.xMin<s.x+1&&(r.y+o.yMax>s.y&&r.y+o.yMax<s.y+1?i.angle()>new O(r.x+o.xMin-(s.x+1),r.y+o.yMax-s.y).angle()?(t.x=s.x+1+o.xMin,t.y+=i.y*((r.x-t.x)/i.x),i.x=-i.x,n=!0):(t.y=s.y-o.yMax,t.x+=i.x*((r.y-t.y)/i.y),i.y=-i.y,n=!0):r.y+o.yMin>s.y&&r.y+o.yMin<s.y+1&&(i.angle()<new O(r.x+o.xMin-(s.x+1),r.y+o.yMin-(s.y+1)).angle()?(t.x=s.x+o.xMax,t.y+=i.y*((r.x-t.x)/i.x),i.x=-i.x,n=!0):(t.y=s.y+o.yMax,t.x+=i.x*((r.y-t.y)/i.y),i.y=-i.y,n=!0)))}),n||t.add(i)})}}})(B),((e,t,i)=>{const s=new O(11*i-300,12*i-50),n=e.select(de);return{update(e){n.iterate(i=>{const n=i.get(de);n.rollTime+=e,n.rollTime>2e3&&n.isRolling&&n.roll();for(let e=1;e<=n.bombSlots.length;e++){let i=n.bombSlots[e-1];L(s,i,e,t,n.isRolling,n.rollTime/2e3)}!n.isAvailable()&&n.isAllExploded()&&!n.isRolling&&n.canRoll&&n.initRoll()})}}})(B,Fe,tileSize),((e,t)=>{const i=e.select(oe,Z);return{update:()=>{i.iterate(e=>{const i=e.get(Z);e.get(oe);W(i,t)})}}})(B,Fe),((e,t)=>{const i=e.select(xe,Z);return{update:e=>{i.iterate(i=>{const s=i.get(xe);if(s.remaining-=e,s.remaining<0)i.eject();else{const e=i.get(Z);switch(s.bombType){case 0:case 3:case 2:s.points.forEach(i=>{t.beginPath(),t.arc(i.x+e.x*tileSize,i.y+e.y*tileSize,.5*tileSize,0,$),t.fillStyle=`rgba(255,255,255,${1-s.remaining/300})`,t.fill(),i.multiplyScalar(1.33)});break;case 1:t.beginPath(),t.arc(e.x*tileSize,e.y*tileSize,2*tileSize,0,$),t.fillStyle=`rgba(0,0,255,${1-s.remaining/300})`,t.fill()}switch(s.bombType){case 0:case 2:case 3:const i=s.remaining/300;t.beginPath(),t.arc(e.x*tileSize,e.y*tileSize,(1+i)*tileSize*2,0,$),t.strokeStyle=`rgba(255,255,255,${.5*i})`,t.lineWidth=4,t.stroke(),t.beginPath(),t.arc(e.x*tileSize,e.y*tileSize,(1-i)*tileSize*3,0,$),t.stroke()}}})}}})(B,Fe),((e,t)=>{const i=e.select(ge,Z);return{update:e=>{i.iterate(e=>{const i=e.get(Z),s=e.get(ge);s.blink++,((e,t,i)=>{e.fillStyle="#040B0F",e.fillRect(t.x*tileSize,t.y*tileSize,tileSize,tileSize),e.beginPath(),e.rect(t.x*tileSize+2,t.y*tileSize+2,tileSize-4,tileSize-4),e.strokeStyle=i.exploded?"#444":"#C21111",e.lineWidth=1,e.stroke(),e.beginPath(),e.rect(t.x*tileSize-10,t.y*tileSize-10,tileSize+20,tileSize+20),e.strokeStyle="#9E4D06",e.lineWidth=2,e.stroke()})(t,i,s)})}}})(B,Fe),((e,t,i)=>{const s=e.select(le),n=e.select(ae),o=(e.select(de),e.select(fe));return{update:i=>{s.iterate(s=>{const r=s.get(le),l=s.get(Z);if(0===r.type){t.beginPath(),t.arc(l.x*tileSize,l.y*tileSize,2*tileSize,0,$),t.lineWidth=2,t.closePath(),t.strokeStyle="#971313",t.stroke();const o=2*tileSize,h=2*o/17;var a=Math.cos(1),c=Math.sin(1);for(let e=0;e<16;e++){const i=h*(e+1)-o,s=Math.sqrt(o*o-i*i),n=i*c+s*a+l.x*tileSize,r=i*c-s*a+l.x*tileSize,f=i*a-s*c+l.y*tileSize,y=i*a+s*c+l.y*tileSize;t.beginPath(),t.moveTo(n,f),t.lineTo(r,y),t.stroke()}t.beginPath(),t.fillStyle="rgba(245, 88, 21, .3)";const f=0===r.hostile.type?500:1e3;t.arc(l.x*tileSize,l.y*tileSize,(1-r.remaining/f)*tileSize*2,0,$),t.fill(),r.remaining-=i,r.remaining<0&&(n.iterate(e=>{const t=e.get(Z),i=e.get(ae);l.distance2D(t)<2&&(i.hp-=15)}),r.hostile.isAttacking=!1,s.eject(),e.create().add(new Z(l.x,l.y,l.z),new ue(performance.now())))}else{let e=!1;t.fillStyle=`rgba(255, 0, 0, ${1-r.remaining/500})`;let a,c,h=!1;r.remaining-=i,r.remaining<0&&(n.iterate(e=>{a=e.get(Z),c=e.get(ae),h=!0,s.eject()}),s.eject(),r.hostile.isAttacking=!1,r.hostile.effect=4,r.hostile.effectTime=3e3);for(let i=Math.floor(l.x);i<22&&!e;i++)!h||Math.floor(a.x)!==i||Math.floor(a.y)!==Math.floor(l.y)&&Math.floor(a.y+1)!==Math.floor(l.y)||(c.hp-=15),t.fillRect(i*tileSize,Math.floor(l.y)*tileSize,tileSize,tileSize),o.iterate(t=>{const s=t.get(fe);i+1===s.x&&Math.floor(l.y)===s.y&&(e=!0)});e=!1;for(let i=Math.floor(l.x);i>0&&!e;i--)!h||Math.floor(a.x)!==i||Math.floor(a.y)!==Math.floor(l.y)&&Math.floor(a.y+1)!==Math.floor(l.y)||(c.hp-=15),t.fillRect(i*tileSize,Math.floor(l.y)*tileSize,tileSize,tileSize),o.iterate(t=>{const s=t.get(fe);i===s.x+1&&Math.floor(l.y)===s.y&&(e=!0)})}})}}})(B,Fe),((e,t)=>{const i=e.select(ue);return{update:e=>{i.iterate(e=>{const i=e.get(ue);if(performance.now()-i.at>300)return void e.eject();const s=e.get(Z);t.beginPath(),t.fillStyle="rgba(200, 30, 30, .7)",t.arc(s.x*tileSize,s.y*tileSize,2*tileSize,0,$),t.closePath(),t.fill()})}}})(B,Fe),((e,t,i)=>{const s=e.select(ce);return{update:()=>{s.iterate(e=>{const s=e.get(ce);s.isHover&&(t.fillStyle="rgba(255, 255, 255, 0.3)",t.fillRect(0,s.y-10,i.width,120)),t.font=tileSize+"px Arial",s.isButton?(t.fillStyle="#fff",t.fillRect(s.x,s.y,300,100),t.textAlign="center",t.fillStyle="#000",t.fillText(s.text,s.x+150,s.y+60)):(t.fillStyle="#000",t.fillText(s.text,s.x+150,s.y+50))})}}})(B,Fe,Be),((e,t,i)=>{const s=e.select(ae),n=e.select(re),o=new O(11*tileSize-210,10);return{update:()=>{s.iterate(s=>{const n=s.get(ae);n.hp<=0&&window.currentScreen.isGame?(mapLoader.unload(e),window.currentScreen.unload(),window.currentScreen=((e,t,i)=>({isGame:!1,load:()=>{e.create().add(new ce("404 Life not found !",i.width/2-150,i.height/2,()=>{},!1)),e.create().add(new ce("Restart ?",i.width/2-150,i.height/2+150,()=>{window.currentScreen.unload(),window.currentScreen=be(e),window.mapLoader.init()},!0))},unload:()=>{Se(e)}}))(e,tileSize,i),window.currentScreen.load()):(t.fillStyle="#000",t.fillRect(o.x,o.y,420,50),t.fillStyle="#9e333d",t.fillRect(o.x+10,o.y+10,4*n.hp,30),t.font="400 22px Arial",t.fillStyle="#000",t.fillText("HP",o.x+27,o.y+35),t.fillStyle="#fff",t.fillText("HP",o.x+25,o.y+33))}),n.iterate(e=>{2===e.get(re).type&&(t.fillStyle="#000",t.fillRect(o.x,o.y+40,420,15),t.fillStyle="red",t.fillRect(o.x+10,o.y+45,4*e.get(re).hp,5),t.font="400 22px Arial",t.fillStyle="#000",t.fillText("BOSS",o.x+17,o.y+55),t.fillStyle="#fff",t.fillText("BOSS",o.x+15,o.y+55))})}}})(B,Fe,Be)),(async()=>{const e=await(async e=>{const t=await p(e),i=u.createBufferSource();return i.buffer=t,i.connect(u.destination),e=>(i.loop=e,i.start(),i)})(g);let t=null,i=!1;Be.onclick=()=>{i||(t=e(!0),i=!0)},s.onclick=()=>{t.stop()}})(),window.currentScreen=we(B,Be),we(B,Be).load();let Le,Ne=0;const Ue=()=>{Le=performance.now(),Be.width+=0,B.update(Le-Ne),Ne=Le,requestAnimationFrame(Ue)};Ue()}]);